<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Wineki Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Wineki Blog">
<meta property="og:url" content="http://www.imwineki.cn/index.html">
<meta property="og:site_name" content="Wineki Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wineki Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Wineki Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Wineki Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.imwineki.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-åŸºäºcanvasç»Ÿè®¡å›¾å®ç°" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/19/åŸºäºcanvasç»Ÿè®¡å›¾å®ç°/" class="article-date">
  <time datetime="2016-04-19T15:01:29.000Z" itemprop="datePublished">2016-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/19/åŸºäºcanvasç»Ÿè®¡å›¾å®ç°/">åŸºäºcanvasç»Ÿè®¡å›¾å®ç°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨åšäººå£ç»Ÿè®¡æŠ˜çº¿å›¾çš„éœ€æ±‚ï¼Œç»ˆäºæˆåŠŸçš„ä¸Šçº¿äº†ï¼Œæ‰“ç®—æŠŠæŠ€æœ¯ç‚¹æ€»ç»“ä¸€ä¸‹ï¼Œåˆ†äº«ç²—æ¥ã€‚<br>    é¦–å…ˆæ¥çœ‹çœ‹è¿™ä¸ªç£¨äººçš„å°å¦–ç²¾é•¿æˆä»€ä¹ˆæ ·å­ï¼Œ<a href="https://www.so.com/s?ie=utf-8&shb=1&src=360sou_newhome&q=%E4%BA%BA%E5%8F%A3" target="_blank">pcç«¯çš„æ ·çº¸</a>ï¼Œ<a href="http://m.so.com/s?q=%E4%BA%BA%E5%8F%A3&src=msearch_test&srcg=home_next" target="_blank">ç§»åŠ¨ç«¯çš„æ ·çº¸</a>ã€‚pcå’Œç§»åŠ¨æ˜¯ä¸¤ç§ä¸åŒçš„äº¤äº’æ¨¡å¼ï¼Œç»˜åˆ¶çš„è¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›ç»†èŠ‚ä¸å¤ªä¸€æ ·ï¼Œåœ¨ä¸‹é¢çš„ä»‹ç»ä¸­ä¼šæœ‰æåˆ°ï¼Œä½ è¦åšæŒè¯»ä¸‹å»å“¦ï¼Œæ¥ï¼Œæˆ‘ä»¬å†æ¥å¼ æˆªå›¾ç•™ä¸ªå¿µ~<img src="/img/pada.gif" width="30" height="30" style="display: inline-block"><br>    pc:<br>    <img src="/img/chart1.png" alt="" width="400" height="200"><br>    ç§»åŠ¨ï¼š<br>    <img src="/img/chart2.png" alt="" width="400" height="200"><br>æ©ï¼Œç‚«è€€å¤Ÿäº†ï¼Œç°åœ¨å¼€å§‹è®²å¹²è´§ã€‚<br>æ•°æ®æ˜¯æ ¹æ®æ•°æ®ç«¯çš„åŒå­¦çˆ¬æ•°æ®åŠ¨æ€ç»Ÿè®¡å‡ºæ¥çš„ï¼Œæˆ‘éœ€è¦åšçš„å°±æ˜¯è®²è¿™äº›ç»Ÿè®¡å‡ºæ¥çš„æ•°æ®ç”»æˆç»Ÿè®¡å›¾ï¼Œå±•ç°å‡ºæ¥ã€‚<br>è¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
<p><li>ç»˜åˆ¶å‰å¯¹æ•°æ®çš„å¤„ç†</li></p>
<p><li>æ ¹æ®æ•°æ®ç»˜åˆ¶æŠ˜çº¿å›¾çš„è¿‡ç¨‹</li></p>
<p><li>canvasåœ¨retinaå±å¹•ä¸‹æ˜¾ç¤ºæ•ˆæœçš„å…¼å®¹</li></p>
<p><li>å¯¹IE6ç­‰ä½ç‰ˆæœ¬æµè§ˆå™¨çš„å…¼å®¹</li><br>é¦–å…ˆæˆ‘ä»¬æ¥ä»‹ç»å¯¹æ•°æ®çš„å¤„ç†ï¼Œç”±äºä»£ç æ˜¯å†™åœ¨phpæ¨¡æ¿ä¸­çš„ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°æ®ä¼šä»¥smartyå˜é‡çš„æ–¹å¼ä¼ åˆ°å‰ç«¯æ¨¡æ¿ä¸­ï¼Œè€Œcanvasè¿›è¡Œæ¸²æŸ“çš„æ•°æ®ä¸€å®šè¦æ”¾åœ¨jså˜é‡ä¸­ï¼Œæ‰€ä»¥å°±éœ€è¦å°†smartyä¸­çš„æ•°æ®æ”¾åˆ°jså˜é‡ä¸­ã€‚ <br>  </p>
<pre>var data = $.parseJSON('{ %json_encode($result.display)% }');</pre>

<p>è§£é‡Šä¸€ä¸‹ï¼Œé¦–å…ˆä½¿ç”¨PHPå‡½æ•°json_encodeå¯¹æ•°æ®è¿›è¡Œjsonç¼–ç ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨jqueryä¸­parseJSONæ–¹æ³•å¯¹ç¼–ç åçš„æ•°æ®è¿›è¡Œè§£ç ã€‚è¿™é‡ŒparseJSONä¼ å…¥çš„å‚æ•°è¦æ±‚æ¯”è¾ƒé«˜ï¼Œç¨ä¸ç¬¦åˆæ ‡å‡†å°±ggäº†ï¼ˆå®˜æ–¹è¯´æ³•ï¼šæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼š<br></p>
<p><li>{test: 1} (test æ²¡æœ‰ä½¿ç”¨åŒå¼•å·åŒ…è£¹).</li></p>
<p><li>{â€˜testâ€™: 1} (â€˜testâ€™ ç”¨äº†å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·åŒ…è£¹).</li></p>
<p><li>â€œ{test: 1}â€ (test æ²¡æœ‰ä½¿ç”¨åŒå¼•å·åŒ…è£¹).</li></p>
<p><li>â€œ{â€˜testâ€™: 1}â€ (â€˜testâ€™ ç”¨äº†å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·åŒ…è£¹).</li></p>
<p><li>â€œâ€˜testâ€™â€ (â€˜testâ€™ ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·).</li></p>
<p><li>â€œ.1â€ (number å¿…é¡»ä»¥æ•°å­—å¼€å¤´; â€œ0.1â€ å°†æ˜¯æœ‰æ•ˆçš„).</li></p>
<p><li>â€œundefinedâ€ (undefined ä¸èƒ½è¡¨ç¤ºä¸€ä¸ª JSON å­—ç¬¦ä¸²; ç„¶è€Œnull,å¯ä»¥).</li></p>
<p><li>â€œNaNâ€ (NaN ä¸èƒ½è¡¨ç¤ºä¸€ä¸ª JSON å­—ç¬¦ä¸²; ç”¨Infinityç›´æ¥è¡¨ç¤ºæ— é™ä¹Ÿæ˜¯ä¸å…è®¸çš„).</li><br>ç°åœ¨æ•°æ®å·²ç»ç¼“å­˜åˆ°jsä¸­äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹æ•°æ®çš„å¤„ç†ï¼Œæ•°æ®å¤„ç†å…±åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹æ¨ªçºµåæ ‡çš„å¤„ç†ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯å¯¹æŠ˜çº¿å›¾ä¸­çš„ç‚¹çš„åæ ‡çš„å¤„ç†ã€‚<br>å…ˆè¯´å¯¹æ¨ªçºµåæ ‡çš„å¤„ç†ï¼Œç”±äºä¼Ÿå¤§çš„PMæ˜¯ä¸ªå¤„å¥³åº§çš„ç¾ç”·å­ï¼Œå¯¹äºæ•°æ®å¤„ç†è¦æ±‚åä¸‡åˆ†å¤æ‚ï¼Œåœ¨è‹¥å¹²æ¬¡çš„æ„‰å¿«çš„äº‰è®ºå’Œå•†è®¨åï¼Œæˆ‘ä»¬å†³å®šå°†çºµåæ ‡å±•ç¤ºé€»è¾‘ï¼šç¬¬ä¸€ä¸ªåæ ‡å’Œæœ€åä¸€ä¸ªåæ ‡å±•ç¤ºä¸ºæ•°æ®ä¸­çš„æœ€å°å€¼-è¯¯å·®å€¼å’Œæœ€å¤§å€¼+è¯¯å·®å€¼ï¼Œè¯¯å·®å€¼ï¼šæ•°æ®çš„ï¼ˆæœ€å¤§å€¼-æœ€å°å€¼ï¼‰*0.05å†å››èˆäº”å…¥ï¼Œæ¨ªåæ ‡æ’å¸ƒæ–¹æ¡ˆï¼šå°†é™¤å‰å‡ ä¸ªæ•°å¹³å‡åˆ†ï¼Œå‰©ä½™çš„æ‰€æœ‰éƒ½å †ç§¯åœ¨æœ€åä¸€æ®µã€‚æ˜¯ä¸æ˜¯æ²¡å¤ªå¬æ˜ç™½ï¼Œæ²¡äº‹ï¼Œæˆ‘å½“æ—¶ä¹Ÿå„ç§æ‡µåœˆï¼Œä¸Šä¸ªå›¾ç‰‡ä½ è‡ªå·±ç®—ç®—å°±æ˜ç™½äº†ã€‚è¿™æ˜¯æ¨ªåæ ‡ï¼Œä½ è®¡ç®—ä¸€é¡¹ç›¸é‚»åæ ‡çš„å·®ï¼Œå°±æ˜ç™½æˆ‘çš„æ„æ€å•¦ï¼<br>æ¨ªåæ ‡ï¼š<img src="/img/chart3.png" alt="" width="400" height="200" style="display:inline-block"><br>çºµåæ ‡ï¼š<img src="/img/chart4.png" alt="" width="100" height="200" style="display:inline-block"><br>æ¥çœ‹çœ‹ä»£ç å¤„ç†é€»è¾‘ï¼š</p>
<pre><code><span class="comment">/*Yè½´ä¸Šä¸‹è¯¯å·®*/</span>
var errVal = Math.round((yVal[<span class="number">0</span>] - yVal[yVal.length-<span class="number">1</span>]) *<span class="number">0.05</span>);
var minY = yVal[yVal.length-<span class="number">1</span>] - errVal;
minY = minY &gt; <span class="number">0</span> ? minY : yVal[yVal.length-<span class="number">1</span>]*<span class="number">0.95</span>;
var maxY = yVal[<span class="number">0</span>] + errVal;
<span class="keyword">if</span>(data.cpi_year !== undefined){
    <span class="comment">/*æ ¹æ®å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼Œæ­¤ç§æƒ…å†µä¸‹ï¼Œé‡‡ç”¨è¿›ä¸€æ³•å¤„ç†æ•°æ®*/</span>
    var ySpacing = ((maxY - minY)/<span class="number">3</span>).toFixed(<span class="number">1</span>);
}<span class="keyword">else</span>{
    var ySpacing = Math.<span class="built_in">ceil</span>((maxY - minY)/<span class="number">3</span>);
}
</code></pre><p><br><br>å½“ç„¶å®é™…çš„ä¸šåŠ¡é€»è¾‘æ¯”ç°åœ¨è¯´çš„è¿˜ä¼šå¤æ‚ä¸€äº›ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç”Ÿæˆæ¨ªçºµåæ ‡çš„æ–¹æ³•ï¼š<br><br></p>
<pre><code><span class="comment">/*ç”Ÿæˆåæ ‡è½´*/</span>
<span class="function"><span class="keyword">function</span> <span class="title">creatCoordinate</span>(<span class="params">param,isX</span>)</span>{
    <span class="keyword">var</span> _this = <span class="keyword">this</span>;
    <span class="keyword">var</span> Carr = <span class="keyword">new</span> <span class="built_in">Array</span>();
    <span class="keyword">if</span>(isX){
        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){
            $(param.parentNode,chart).append(<span class="string">'&lt;span class="'</span>+param.className+<span class="string">' js-mh-xChart'</span>+i+<span class="string">'"&gt;'</span>+param.val+param.unit+<span class="string">'&lt;/span&gt;'</span>);
            <span class="comment">/*è®¡ç®—å½“å‰å€¼ä¸æœ€å°å€¼çš„å·®å€¼æ˜ å°„åœ¨åæ ‡å›¾ä¸­å½“å‰ç‚¹è·ç¦»æœ€å·¦è¾¹ç‚¹çš„è·ç¦»*/</span>
            <span class="keyword">var</span> left = <span class="built_in">parseInt</span>(((param.val - param.minVal) * mapWidth /(param.maxVal - param.minVal)) - $(<span class="string">'.js-mh-xChart'</span>+i).width()/<span class="number">2</span>);
            $(<span class="string">'.js-mh-xChart'</span>+i)[<span class="number">0</span>].style.left=left+<span class="string">"px"</span>;
            Carr.push(param.val);
            param.val += param.spacing;
        }
        <span class="comment">/*ç”Ÿæˆæœ€åä¸€ä¸ªç‚¹*/</span>
        $(param.parentNode,chart).append(<span class="string">'&lt;span class="'</span>+param.className+<span class="string">' js-mh-xChart'</span>+i+<span class="string">'"&gt;'</span>+param.maxVal+param.unit+<span class="string">'&lt;/span&gt;'</span>);
        <span class="keyword">var</span> left = <span class="built_in">parseInt</span>(((param.maxVal - param.minVal) * mapWidth /(param.maxVal - param.minVal)) - $(<span class="string">'.js-mh-xChart'</span>+i).width()/<span class="number">2</span>);
        $(<span class="string">'.js-mh-xChart'</span>+i)[<span class="number">0</span>].style.left=left+<span class="string">"px"</span>;
    }<span class="keyword">else</span>{
        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++){
            <span class="keyword">var</span> valY = dataYround(param.val);
            $(param.parentNode,chart).prepend(<span class="string">'&lt;p class='</span>+param.className+<span class="string">'&gt;'</span>+valY.y+valY.unit+param.unit+<span class="string">'&lt;/p&gt;'</span>);
            Carr.push(param.val);
            param.val += +param.spacing;
            param.val = +(param.val).toFixed(<span class="number">2</span>);
        }
        <span class="comment">/*ç”Ÿæˆæœ€åä¸€ä¸ªç‚¹*/</span>
        <span class="keyword">var</span> valY = dataYround(param.maxVal);
        $(param.parentNode,chart).prepend(<span class="string">'&lt;p class='</span>+param.className+<span class="string">'&gt;'</span>+valY.y+valY.unit+param.unit+<span class="string">'&lt;/p&gt;'</span>);
    }
    Carr.push(param.maxVal);
    <span class="keyword">return</span> Carr;
}   
</code></pre><p>è§£é‡Šä¸€ä¸‹å‡ ä¸ªå…·ä½“çš„ç‚¹ï¼šisXä¸ºtrueä¸ºxè½´å¤„ç†é€»è¾‘ï¼Œfalseä¸ºyè½´å¤„ç†é€»è¾‘ã€‚forå¾ªç¯å°†æ‰€æœ‰çš„ç‚¹æ¸²æŸ“å‡ºæ¥ï¼Œæœ€åå°†æœ€åä¸€ä¸ªç‚¹çš„ä½ç½®å•ç‹¬ç»˜åˆ¶å‡ºæ¥ï¼Œå•ç‹¬ç»˜åˆ¶çš„åŸå› ä¹‹å‰è¯´ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™æœ‰æåˆ°ã€‚è¿™é‡Œéœ€è¦å¼ºè°ƒä¸€ç‚¹ï¼Œåœ¨xè½´å¤„ç†çš„æ—¶å€™éœ€è¦ä¸€è¾¹æ¸²æŸ“æ•°æ®ä¸€è¾¹è®¡ç®—å½“å‰å€¼ä¸æœ€å°å€¼å¾—å·®å€¼æ˜ å°„åœ¨åæ ‡å›¾ä¸­è·ç¦»æœ€å·¦è¾¹ç‚¹çš„è·ç¦»ï¼ŒåŒæ—¶éœ€è¦å‡å»å½“å‰ç‚¹çš„æ–‡æ¡ˆé•¿åº¦çš„1/2ã€‚<br>åˆ°ç›®å‰ä¸ºæ­¢æ¨ªçºµåæ ‡å·²ç»å¤„ç†å®Œæˆäº†ï¼Œç°åœ¨è¦å¼€å§‹ç”»æŠ˜çº¿å›¾å•¦ï¼canvasç¥å¥‡é—ªäº®ç™»åœºï¼ï¼æ¬¢å‘¼æ¬¢å‘¼ï¼ï¼æˆ‘ç»ˆäºå†™å®Œå››åˆ†ä¹‹ä¸€äº†ï¼<img src="/img/pada1.gif" width="30" height="30" style="display: inline-block"><br>canvasç»˜åˆ¶é¦–å…ˆæ–°å»ºä¸€ä¸ªchartå¯¹è±¡ã€‚å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code><span class="comment">/*ç»˜åˆ¶è¡¨æ ¼*/</span>
<span class="function"><span class="keyword">function</span> <span class="title">Chart</span><span class="params">( config )</span></span>{
    <span class="keyword">var</span> _this = <span class="keyword">this</span>;
    _this.ele = {

    };
    _this.data = {

    };
}
</code></pre><p>ä»¥ä¸Šæ˜¯ç”»å›¾æ‰€éœ€è¦çš„æ‰€æœ‰å‚æ•°çš„ï¼Œç°åœ¨æˆ‘ä»¬åŸºäºè¿™äº›å®šä¹‰å¥½çš„å‚æ•°å¼€å§‹ç»˜åˆ¶æŠ˜çº¿å›¾ã€‚<br>é¦–å…ˆéœ€è¦initCanvasç”»å¸ƒ</p>
<pre><code>initCanvas : <span class="function"><span class="keyword">function</span>(<span class="params">className</span>)</span>{
            <span class="keyword">var</span> _this = <span class="keyword">this</span>;
            <span class="keyword">var</span> canvasEle = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);
            <span class="keyword">var</span> width = +_this.data.chartWidth;
            <span class="keyword">var</span> height = +_this.data.chartHeight;
            $(canvasEle).width(width)
                        .height(height)
                        .attr(<span class="string">'width'</span>,width)
                        .attr(<span class="string">'height'</span>,height)
                        .addClass(className);
            <span class="comment">/*é’ˆå¯¹IE8ä»¥ä¸‹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„å¤„ç†*/</span>
            <span class="keyword">if</span>(_this.data.IE8_AND_LOWER){
                canvasEle=<span class="built_in">window</span>.G_vmlCanvasManager.initElement(canvasEle);
            }
            _this.ele.canvasWrap.append(canvasEle);
        }
</code></pre><p>ä¼ å…¥åŒ…è£¹canvasçš„å¤–å±‚å®¹å™¨ï¼ŒåŠ¨æ€åˆ›å»ºcanvaså…ƒç´ ï¼Œå¹¶ä¸ºcanvaså…ƒç´ å¤åˆ¶é«˜åº¦å’Œå®½åº¦ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šç»†å¿ƒçš„ä½ æœ‰ä¹ˆæœ‰å‘ç°æˆ‘ä»¬åœ¨attrå’Œstyleé‡Œé¢åˆ†åˆ«å®šä¹‰äº†ä¸¤æ¬¡å®½åº¦å’Œé«˜åº¦ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ä¸ºäº†å…¼å®¹retinaå±å¹•2å€å°ºå¯¸åšçš„å¤„ç†ï¼Œstyleä¸­çš„widthå’Œheightæ˜¯æˆ‘ä»¬åˆå§‹åŒ–æ—¶å€™çš„å€¼ï¼Œå½“ä½ çš„å±å¹•æ˜¯retinaå±çš„æ—¶å€™ï¼Œatträ¸­çš„widthå’Œheightå°±ä¼šå¤„ç†æˆä¹˜ä»¥2çš„å€¼ã€‚ifåˆ¤æ–­ä¸­å¯¹IE8ä»¥ä¸‹çš„æµè§ˆå™¨ï¼Œæ— æ³•è·å–getContextçš„æ–¹æ³•ï¼Œé‡‡ç”¨<a href="https://github.com/yinso/excanvas" target="_blank">excanvas</a>è¿™ä¸ªæ’ä»¶æ¥å…¼å®¹ã€‚<br>ç„¶åå¼€å§‹ç”»èƒŒæ™¯</p>
<pre><code>drawChart: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
            <span class="keyword">var</span> _this = <span class="keyword">this</span>;
            <span class="keyword">var</span> chartCtx = _this.ele.canvasChart.getContext(<span class="string">'2d'</span>);
            <span class="comment">/*ä¸­å¿ƒå¹³ç§»ï¼Œé˜²æ­¢è¾¹ç¼˜åé”¯é½¿*/</span>
            chartCtx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);
            <span class="comment">/*ç”»èƒŒæ™¯ç½‘æ ¼*/</span>
            _this.drawBackground(chartCtx);
            <span class="comment">/*ç”»æ•°æ®*/</span>
            _this.drawLine(chartCtx);
        }
drawBackground: <span class="function"><span class="keyword">function</span>(<span class="params">ctx</span>)</span>{
            <span class="keyword">var</span> _this = <span class="keyword">this</span>;
            ctx.beginPath();
            ctx.strokeStyle = <span class="string">'#dcdcdc'</span>;
            ctx.lineWidth = <span class="number">1.0</span>;
            <span class="keyword">var</span> lineSpace = _this.data.lineSpace;
            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;_this.data.lineNum;i++){
                <span class="keyword">var</span> lineY = <span class="built_in">parseInt</span>(i * lineSpace);
                ctx.moveTo(<span class="number">0</span>,lineY+_this.data.tOffset);
                ctx.lineTo(_this.data.chartWidth, lineY+_this.data.tOffset);
            }
            ctx.stroke();
        }
</code></pre><p>lineNumä¸ºèƒŒæ™¯çº¿çš„æ€»ä¸ªæ•°ï¼Œå®šä¹‰èƒŒæ™¯çº¿çš„é¢œè‰²ï¼Œå®½åº¦ï¼Œä¸¤çº¿é—´éš”ï¼Œèµ·ç‚¹æ˜¯ï¼ˆ0ï¼ŒlineY+_this.data.tOffsetï¼‰lineYä¸ºé€šè¿‡æ ¹æ®ä¸¤çº¿é—´çš„é—´éš”è®¡ç®—çš„å€¼ï¼ŒtOffsetä¸ºè·ç¦»é¡¶éƒ¨çš„ä½ç§»é‡ï¼Œç»ˆç‚¹æ˜¯ï¼ˆ_this.data.chartWidth, lineY+_this.data.tOffsetï¼‰_this.data.chartWidthè¡¨ç¤ºå›¾è¡¨çš„å®½åº¦ã€‚æ•ˆæœå›¾:<img src="/img/chart5.png" alt="" width="400" height="200">ã€‚<br>è¿™é‡Œéœ€è¦å¼ºè°ƒä¸€ä¸‹ï¼Œ<em>chartCtx.translate(0.5, 0.5);</em>è¿™é‡Œçš„ç”¨æ„ï¼Œæ˜¯å› ä¸ºåœ¨ç»˜åˆ¶å®½åº¦ä¸º1çš„çº¿æ¡æ—¶ï¼Œcanvasæ˜¯ä»¥çº¿æ¡å®½åº¦ä¸­é—´ä½ç½®ä½œä¸ºæ¸²æŸ“ä¸­å¿ƒåƒä¸Šä¸‹æ–¹å‘æ™•æŸ“ï¼Œæ‰€ä»¥ä¸ºäº†æ¸…æ™°æˆåƒï¼Œæˆ‘ä»¬å°†ç”»å¸ƒå¹³ç§»äºŒåˆ†ä¹‹ä¸€å®½åº¦ã€‚<br>ç°åœ¨å¯ä»¥åœ¨è¿™ä¸ªèƒŒæ™¯çš„ä¸Šé¢ç»˜åˆ¶æŠ˜ç°å›¾äº†ï¼Œéœ€è¦å£°æ˜çš„æ˜¯åœ¨ç»˜åˆ¶æŠ˜çº¿å›¾ä¹‹å‰ï¼Œéœ€è¦å¯¹æ•°æ®å¤„ç†ï¼Œæ­¤å¤„ç»†èŠ‚å¿½ç•¥ä¸€ä¸‡å­—â€¦â€¦<br>å‡å¦‚æˆ‘ä»¬çš„æ•°æ®å·²ç»å¤„ç†å¥½äº†å“¦ï¼Œç°åœ¨å¼€å§‹ç”»å›¾</p>
<pre><code>drawLine: <span class="keyword">function</span>(ctx){
            <span class="comment">/*ç»˜åˆ¶æŠ˜çº¿å›¾*/</span>
            var <span class="number">_</span><span class="keyword">this</span> = <span class="keyword">this</span>;
            <span class="comment">/*getpositionæ–¹æ³•ä¸ºå¿½ç•¥ä¸€ä¸‡å­—çš„é€»è¾‘*/</span>
            <span class="number">_</span><span class="keyword">this</span>.getPosition(<span class="number">_</span><span class="keyword">this</span>.data.points);
            ctx.strokeStyle = <span class="string">'#19b955'</span>;
            ctx.fillStyle = <span class="string">'#19b955'</span>;
            ctx.lineWidth = <span class="number">2.0</span>;
            ctx.beginPath();
            <span class="keyword">for</span>(var i=<span class="number">0</span>; i&lt;<span class="number">_</span><span class="keyword">this</span>.data.pointsPosition.length;i++){
                <span class="keyword">if</span>(i + <span class="number">1</span> === <span class="number">_</span><span class="keyword">this</span>.data.pointsPosition.length){
                    <span class="keyword">break</span>;
                }
                ctx.moveTo(<span class="number">_</span><span class="keyword">this</span>.data.pointsPosition[i][<span class="number">0</span>],<span class="number">_</span><span class="keyword">this</span>.data.pointsPosition[i][<span class="number">1</span>]);
                ctx.lineTo(<span class="number">_</span><span class="keyword">this</span>.data.pointsPosition[i+<span class="number">1</span>][<span class="number">0</span>],<span class="number">_</span><span class="keyword">this</span>.data.pointsPosition[i+<span class="number">1</span>][<span class="number">1</span>])
            }
            ctx.stroke();
        }
</code></pre><p>å…¶å®åšæ³•å’Œç”»èƒŒæ™¯å›¾çš„çº¿å·®ä¸å¤šï¼Œ_ this.data.pointsPosition.lengthè¡¨ç¤ºçš„æ˜¯è¦ç»˜åˆ¶çš„ç‚¹çš„é•¿åº¦ï¼Œç¡®å®šå¥½æŠ˜çº¿å›¾çš„é¢œè‰²å’Œå®½åº¦ï¼Œå°†æ•´ä¸ªæŠ˜çº¿å›¾åˆ†å‰²æˆä¸ºè‹¥å¹²ä¸ªå°çº¿æ®µï¼Œæ¯ä¸ªå°çº¿æ®µçš„èµ·ç‚¹æ˜¯å½“å‰ç‚¹ï¼Œç»ˆç‚¹æ˜¯ä¸‹ä¸€ä¸ªç‚¹ã€‚<br>è¿™æ—¶å€™æŠ˜çº¿å›¾å°±ç”»å¥½äº†ï¼Œçœ‹çœ‹æ•ˆæœï¼š<br><img src="/img/chart6.png" alt="" width="400" height="200"><br>ç°åœ¨åˆ°æœ€åä¸€æ­¥äº†ï¼Œæˆ‘ä»¬æ¥ç»˜åˆ¶hoveræ•ˆæœã€‚å¤„ç†æ€è·¯å°±æ˜¯ï¼šä½ éœ€è¦è·å–å½“å‰é¼ æ ‡hoveråœ¨canvasä¸­çš„xè½´çš„ä½ç½®ï¼Œç„¶åæ ¹æ®hoverç‚¹çš„xåæ ‡è·å–å¯¹åº”ç‚¹çš„å®é™…æ•°æ®ï¼ŒåŒæ—¶åˆ©ç”¨å½“å‰çš„xåæ ‡ç”»å‡ºhoverçš„è™šçº¿ï¼Œå†åˆ©ç”¨å¯¹åº”çš„å®é™…æ•°æ®ç”»å‡ºhoverçš„åœ†ç‚¹ã€‚</p>
<pre><code><span class="comment">/*ç”»é¼ æ ‡hoveråœ†ç‚¹ä»¥åŠç«–çº¿*/</span>
drawArcPoint: <span class="keyword">function</span>(ctx,pointData){
        var <span class="number">_</span><span class="keyword">this</span> = <span class="keyword">this</span>;
        <span class="comment">/*ç”»å‡ºæ¨ªåæ ‡çš„åŠ¨æ€å€¼*/</span>
        <span class="number">_</span><span class="keyword">this</span>.ele.tipsTextWrap.text(pointData.x);
        <span class="number">_</span><span class="keyword">this</span>.ele.tipsTextWrap[<span class="number">0</span>].style.left = <span class="number">_</span><span class="keyword">this</span>.data.arcPos.x - <span class="number">_</span><span class="keyword">this</span>.ele.tipsTextWrap.width()/<span class="number">2</span> +<span class="string">'px'</span>;
        <span class="comment">/*è¿™é‡Œè¦å®æ—¶è·Ÿè¸ªé¼ æ ‡ä½ç½®ï¼Œæ‰€ä»¥åœ¨é‡æ–°ç»˜åˆ¶ä¹‹å‰åº”è¯¥æ¸…é™¤ä¹‹å‰ç»˜åˆ¶çš„åœ†ç‚¹å’Œç«–çº¿*/</span>
        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">_</span><span class="keyword">this</span>.data.chartWidth,<span class="number">_</span><span class="keyword">this</span>.data.chartHeight);
        <span class="comment">/*å¼€å§‹ç»˜åˆ¶*/</span>
        ctx.beginPath();
        <span class="comment">/*å®šä¹‰çº¿çš„é¢œè‰²*/</span>
        ctx.strokeStyle = <span class="string">'#dcdcdc'</span>;
        <span class="comment">/*å®šä¹‰çº¿çš„å®½åº¦*/</span>
        ctx.lineWidth = <span class="number">1.0</span>;
        <span class="comment">/*èµ·å§‹ç‚¹*/</span>
        ctx.moveTo(<span class="number">_</span><span class="keyword">this</span>.data.arcPos.x,<span class="number">0</span>);
        <span class="comment">/*ç»ˆç‚¹*/</span>
        ctx.lineTo(<span class="number">_</span><span class="keyword">this</span>.data.arcPos.x,<span class="number">_</span><span class="keyword">this</span>.data.mapHeight + <span class="number">_</span><span class="keyword">this</span>.data.tOffset);
        ctx.stroke();
        <span class="keyword">if</span>(pointData.y !== undefined){
            <span class="comment">/*ç»˜åˆ¶åœ†ç‚¹*/</span>
            ctx.beginPath();
            ctx.arc(<span class="number">_</span><span class="keyword">this</span>.data.arcPos.x,<span class="number">_</span><span class="keyword">this</span>.data.arcPos.y,<span class="number">4.5</span>,<span class="number">0</span>,Math.PI*<span class="number">2</span>,true);
            ctx.fillStyle = <span class="string">"#19b955"</span>;
            ctx.fill();
        }
    }
</code></pre><p>å½“ç„¶è¿˜å¤„ç†ä¸€ä¸‹è¾¹ç•Œçš„é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸è®²è¿™ä¸ªç»†èŠ‚äº†~è‡³æ­¤æŠ˜çº¿å›¾å°±ç”»å®Œäº†ï¼Œä»¥ä¸Šè®²è¿°çš„éƒ½æ˜¯æ•´ä¸ªä»£ç ä¸­çš„éƒ¨åˆ†å…³é”®ç‚¹ï¼Œè¿˜æœ‰ä¸€äº›å…·ä½“çš„æ“ä½œå¹¶æ²¡æœ‰è¯¦ç»†æ¥è®²ï¼Œæˆ‘å†™äº†ä¸¤ä¸ªå°demoï¼ˆ<a href="/demo/chart.html" target="_blank">pcç«¯</a>ï¼Œ<a href="/demo/m-chart.html" target="_blank">ç§»åŠ¨ç«¯</a>ï¼‰ï¼ŒåŒ…å«ç§»åŠ¨å’ŒPCä¸¤éƒ¨åˆ†ï¼Œå¦‚æœä½ æ„Ÿæƒ…å»çš„è¯å¯ä»¥ä¸‹è½½æºç è‡ªå·±è¯•è¯•å“ˆ~<br>æ©ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¯´è¯´ï¼Œå¯¹retinaå±å¹•çš„å…¼å®¹é—®é¢˜ï¼Œåƒä½ äº†è§£çš„é‚£æ ·ï¼Œretinaæ˜¯DPR=2[DPR(devicePixelRatio) = è®¾å¤‡åƒç´  / CSSåƒç´ ],æ¥çœ‹ä¸‹é¢è¿™ä¸ªå›¾ï¼š<img src="/img/chart7.png" width="400" height="200" alt="">,æ‰€ä»¥æ­£å¸¸ç»˜åˆ¶çš„è¯ï¼Œå°±ä¼šå¯¼è‡´retinaå±å¹•å‘ˆç°çš„æ•ˆæœæœ‰äº›æ¨¡ç³Šï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº†ä¸€ä¸ªå…¼å®¹çš„æ’ä»¶<a href="https://github.com/jondavidjohn/hidpi-canvas-polyfill" target="_blank">hidpi-canvas-polyfill</a>å¤„ç†åŸç†å‘¢å°±æ˜¯ï¼šè·å–window.devicePixelRatioçš„å€¼ï¼Œå°†canvasæ‰€ç”¨åˆ°çš„ç»˜åˆ¶æ•°æ®éƒ½ä¹˜ä»¥å¯¹åº”çš„DPRçš„å€¼ï¼Œç„¶åå°±å¯ä»¥æ¸…æ™°åœ°æˆåƒäº†ã€‚<br>æœ€åçš„æœ€åï¼Œæ¥ä»‹ç»ä¸€ä¸‹IE8ä»¥ä¸‹è€ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹canvasç¥å™¨ï¼Œå‰é¢æåˆ°è¿‡å¾—excanvas.js,ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code>canvasEle=<span class="built_in">window</span>.G_vmlCanvasManager.initElement(canvasEle);
</code></pre><p>åŸç†æ˜¯ç”±äºè€ç‰ˆæœ¬æµè§ˆå™¨æ— æ³•è·å–getContextçš„æ–¹æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè„šæœ¬ä¼šæŠ¥é”™ï¼Œè€Œexcanvaså®Œç¾çš„å°†canvasè½¬æ¢æˆä¸ºIEå–œæ¬¢çš„VML(Vector Markup Language)æ ¼å¼è¿›è¡Œç»˜åˆ¶ã€‚<br>å¥½äº†ï¼Œå†™å®Œäº†ï¼Œç´¯shiå®å®äº†â€¦â€¦<img src="/img/pada3.gif" width="30" height="30" style="display: inline-block"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2016/04/19/åŸºäºcanvasç»Ÿè®¡å›¾å®ç°/" data-id="cin7ls2c70002a7wgu0ylb0cd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HTTPè§£è¯»ï¼ˆäºŒï¼‰" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/05/HTTPè§£è¯»ï¼ˆäºŒï¼‰/" class="article-date">
  <time datetime="2016-02-05T03:07:42.000Z" itemprop="datePublished">2016-02-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/05/HTTPè§£è¯»ï¼ˆäºŒï¼‰/">HTTPè§£è¯»ï¼ˆäºŒï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥ç»“åˆä¸Šä¸€ç¯‡<a href="http://imwineki.cn/2016/01/25/HTTP%E8%A7%A3%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="external">HTTPè§£è¯»ï¼ˆä¸€ï¼‰</a>å”†å”†HTTPä¸­ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µï¼Œä¸»è¦ä¹Ÿæ˜¯æˆ‘æƒ³å½’çº³ä¸€ä¸‹ä¸€äº›åŸºæœ¬çš„çŸ¥è¯†ç‚¹ã€‚<br>ä¸Šç¯‡ä¸­æåˆ°äº†å®¢æˆ·ç«¯å‘é€äº†ä¸€æ¡è¯·æ±‚åæ˜¯ç»å†äº†æ€æ ·çš„å±‚å±‚å…³å¡æ‰åˆ°è¾¾äº†æœåŠ¡å™¨ï¼Œæˆ‘ä»¬è¿™é‡Œå°±æ¯ä¸€å±‚çš„ç»†èŠ‚å±•å¼€åˆ†æã€‚<br>HTTPæŠ¥æ–‡æ˜¯ç®€å•çš„æ ¼å¼åŒ–æ•°æ®å—ï¼Œåˆ†ä¸ºï¼šè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ï¼Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šèµ·å§‹è¡Œï¼ˆstart lineï¼‰  é¦–éƒ¨ï¼ˆheaderï¼‰  ä¸»ä½“ï¼ˆbodyï¼‰<br>æŠ¥æ–‡åŒ…å«ï¼šæ–¹æ³•ï¼ˆmethodï¼‰è¯·æ±‚URLï¼ˆrequest-URLï¼‰ç‰ˆæœ¬ï¼ˆversionï¼‰çŠ¶æ€ç ï¼ˆstatus-codeï¼‰åŸå› çŠ¶æ€ï¼ˆreason-phraseï¼‰é¦–éƒ¨ï¼ˆheaderï¼‰å®ä½“çš„ä¸»ä½“éƒ¨åˆ†ï¼ˆentity-bodyï¼‰<br>ä¸€ã€‚èµ·å§‹è¡Œï¼ˆæ‰€æœ‰HTTPæŠ¥æ–‡éƒ½åŒ…å«èµ·å§‹è¡Œï¼‰ï¼šåŒ…å«è¯·æ±‚è¡Œå’Œå“åº”è¡Œä¸¤éƒ¨åˆ†<br>1.è¯·æ±‚è¡Œ</p>
<ul>
<li>è¯·æ±‚æŠ¥æ–‡çš„èµ·å§‹è¡Œè¯´æ˜è¦åšä»€ä¹ˆï¼Œå“åº”æŠ¥æ–‡çš„èµ·å§‹è¡Œè¯´æ˜å‘ç”Ÿäº†ä»€ä¹ˆã€‚</li>
<li>åŒ…å«ï¼šä¸€ä¸ªæ–¹æ³•+ä¸€ä¸ªè¯·æ±‚URL</li>
<li>æ–¹æ³•æè¿°æœåŠ¡å™¨åº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼Œè¯·æ±‚URLæè¿°å¯¹å“ªä¸ªèµ„æºæ‰§è¡Œè¿™ä¸ªæ–¹æ³•</li>
<li>è¯·æ±‚è¡Œä¸­åŒ…å«HTTPç‰ˆæœ¬ï¼Œå‘Šè¯‰æœåŠ¡å™¨ä½¿ç”¨å“ªä¸ªHTTPæ–¹æ¡ˆ</li>
</ul>
<p>2.å“åº”è¡Œ</p>
<ul>
<li>åŒ…å«å“åº”æŠ¥æ–‡HTTPç‰ˆæœ¬ï¼Œæ•°å­—çŠ¶æ€ç ï¼Œæè¿°æ“ä½œçŠ¶æ€çš„æ–‡æœ¬å½¢å¼çš„åŸå› çŸ­è¯­</li>
</ul>
<p>3.æ–¹æ³•<br>æ€»ä½“æ¥è¯´ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ— å¤–ä¹ä»¥ä¸‹å‡ ç§æ ‡å‡†æ–¹æ³•ï¼ˆæ³¨æ„è¿™é‡Œåªæ˜¯è¯´æ ‡å‡†æ–¹æ³•ï¼ŒåŒ…å«ä¸ä»…é™äºè¿™å‡ ç§ï¼Œæœ‰çš„æœåŠ¡å™¨è¿˜æ˜¯å®ç°äº†è‡ªå·±ç‰¹æœ‰çš„HTTPçš„æ–¹æ³•ï¼Œç§°ä¸ºæ‰©å±•æ–¹æ³•ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•</th>
<th style="text-align:center">æè¿°</th>
<th style="text-align:center">æ˜¯å¦åŒ…å«ä¸»ä½“</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">GET</td>
<td style="text-align:center">ä»æœåŠ¡å™¨è·å–ä¸€ä»½æ–‡æ¡£</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">HEAD</td>
<td style="text-align:center">åªä»æœåŠ¡å™¨è·å–å“åº”æŠ¥æ–‡çš„å¤´éƒ¨</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">POST</td>
<td style="text-align:center">å‘æœåŠ¡å™¨å‘é€éœ€è¦å¤„ç†çš„æ•°æ®</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">PUT</td>
<td style="text-align:center">å°†è¯·æ±‚çš„ä¸»ä½“éƒ¨åˆ†å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">TRACE</td>
<td style="text-align:center">å¯¹å¯èƒ½ç»è¿‡ä»£ç†æœåŠ¡å™¨ä¼ é€åˆ°æœåŠ¡å™¨ä¸Šçš„æŠ¥æ–‡è¿›è¡Œè¿½è¸ª</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">OPTIONS</td>
<td style="text-align:center">å†³å®šåœ¨æœåŠ¡å™¨ä¸Šå¯ä»¥æ‰§è¡Œå“ªäº›æ–¹æ³•</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">ä»æœåŠ¡å™¨ä¸Šåˆ é™¤ä¸€ä»½æ–‡æ¡£</td>
<td style="text-align:center">å¦</td>
</tr>
</tbody>
</table>
<p>4.çŠ¶æ€ç <br>æ–¹æ³•æ˜¯ç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨åšä»€ä¹ˆäº‹æƒ…ï¼ŒçŠ¶æ€ç æ˜¯ç”¨æ¥å‘Šè¯‰å®¢æˆ·ç«¯å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒçŠ¶ä½“ç åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ•´ä½“èŒƒå›´</th>
<th style="text-align:center">å·²å®šä¹‰èŒƒå›´</th>
<th style="text-align:center">åˆ†ç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">100~199</td>
<td style="text-align:center">100~101</td>
<td style="text-align:center">ä¿¡æ¯æç¤º</td>
</tr>
<tr>
<td style="text-align:center">200~299</td>
<td style="text-align:center">200~206</td>
<td style="text-align:center">æˆåŠŸ</td>
</tr>
<tr>
<td style="text-align:center">300~399</td>
<td style="text-align:center">300~305</td>
<td style="text-align:center">é‡å®šå‘</td>
</tr>
<tr>
<td style="text-align:center">400~499</td>
<td style="text-align:center">400~415</td>
<td style="text-align:center">å®¢æˆ·ç«¯é”™è¯¯</td>
</tr>
<tr>
<td style="text-align:center">500~599</td>
<td style="text-align:center">500~505</td>
<td style="text-align:center">æœåŠ¡å™¨é”™è¯¯</td>
</tr>
</tbody>
</table>
<p>å¸¸è§çš„çŠ¶æ€ç ï¼š<br>200 çŠ¶æ€çŸ­è¯­ï¼šOK æˆåŠŸï¼Œ401 çŠ¶æ€çŸ­è¯­ï¼šUnauthorized(æœªæˆæƒ) éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œ404 çŠ¶æ€çŸ­è¯­ï¼šNot Found æœªæ‰¾åˆ°ï¼Œ502 çŠ¶æ€çŸ­è¯­ï¼šBad Category ç½‘å…³é”™è¯¯</p>
<p>5.åŸå› çŸ­è¯­</p>
<p>6.ç‰ˆæœ¬å·<br>HTTP/x.yå½¢å¼å‡ºç°<br>äºŒã€‚é¦–éƒ¨ï¼šåŒ…å«é€šç”¨é¦–éƒ¨ï¼Œè¯·æ±‚é¦–éƒ¨ï¼Œå“åº”é¦–éƒ¨ï¼Œå®ä½“é¦–éƒ¨ï¼Œæ‰©å±•é¦–éƒ¨<br>å¸¸è§é¦–éƒ¨ï¼šå¦‚å›¾<img src="/img/http2-1.png" alt=""><br>é€šç”¨é¦–éƒ¨ä¸­è¿˜åŒ…å«é€šç”¨ç¼“å­˜é¦–éƒ¨ï¼Œè¯·æ±‚é¦–éƒ¨ä¸­åŒ…å«Accepté¦–éƒ¨ï¼Œæ¡ä»¶è¯·æ±‚é¦–éƒ¨ï¼Œå®‰å…¨è¯·æ±‚é¦–éƒ¨ï¼Œä»£ç†è¯·æ±‚é¦–éƒ¨ã€‚<br>å“åº”é¦–éƒ¨ä¸­åŒ…å«åå•†é¦–éƒ¨ï¼Œå®‰å…¨å“åº”é¦–éƒ¨ã€‚<br>å®ä½“é¦–éƒ¨ä¸­åŒ…å«å†…å®¹é¦–éƒ¨ï¼Œå®ä½“ç¼“å­˜é¦–éƒ¨ã€‚<br>ä¸‰ã€‚ä¸»ä½“ï¼šHTTPæŠ¥æ–‡å®ä½“ä¸»ä½“éƒ¨åˆ†æ˜¯å¯é€‰çš„<br>è¯´äº†è¿™ä¹ˆå¤šæ˜¯ä¸æ˜¯å¾ˆä¸ç›´è§‚ï¼Ÿæ²¡å…³ç³»ï¼Œæ¥ä¸¾ä¸ªğŸŒ°å°±ç›´è§‚äº†ã€‚æ¯”å¦‚ï¼šæˆ‘ç°åœ¨åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥äº†ï¼šhttp:www.imwineki.cn/index.htmlï¼Œå½“æˆ‘æŒ‰ä¸‹å›è½¦åçš„ä¸‹ä¸€ç§’ï¼Œæµè§ˆå™¨å°±å‘æœåŠ¡å™¨å‘é€äº†ä¸€æ¡getè¯·æ±‚ï¼Œè¯·æ±‚çš„æ–‡æ¡£çš„å½“ç„¶å°±æ˜¯index.htmlè¿™ä¸ªæ–‡ä»¶äº†ï¼Œå½“ç„¶æœåŠ¡å™¨ä¼šå°†æ–‡ä»¶æ‰¾åˆ°åè¿”å›å›æ¥ï¼Œé…±ç´«ä½ å°±èƒ½çœ‹åˆ°æˆ‘çš„åšå®¢çš„ä¸»é¡µäº†ï¼ˆé€šå¸¸ç›¸åº”çš„çŠ¶æ€æ˜¯200ï¼‰ã€‚è¿™å¼ å›¾å°±æ˜¯æˆ‘å‘é€è¯·æ±‚æ˜¯çš„æˆªå›¾ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼š<img src="/img/http2-2.png" alt=""><br>èµ·å§‹è¡Œä¿¡æ¯ï¼š<br>Request Urlè·³è½¬é“¾æ¥ï¼ŒRequest Methodè¯·æ±‚æ–¹æ³•ä¸ºgetæ–¹æ³•ï¼ŒRemote statusç›¸åº”çŠ¶æ€ç 200 okï¼ŒRemote Addressè¯·æ±‚IPåœ°å€ï¼ˆé»˜è®¤80ç«¯å£ï¼‰<br>é¦–éƒ¨ï¼šRequest Header<br>    é€šç”¨é¦–éƒ¨ï¼šDate:Fri, 05 Feb 2016 10:44:59 GMT<br>            Connection:keep-alive<br>            Via:1.1 varnish<br>    é€šç”¨ç¼“å­˜é¦–éƒ¨ï¼šCache-Control:max-age=600<br>    è¯·æ±‚é¦–éƒ¨ï¼šAccept-Ranges:bytes<br>            Host:imwineki.cn<br>            User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.103 Safari/537.36<br>    å“åº”é¦–éƒ¨ï¼šServer:GitHub.com<br>    å®ä½“é¦–éƒ¨ï¼šContent-Encoding:gzip<br>            Content-Length:4838<br>            Content-Type:text/html; charset=utf-8<br>å·®ä¸å¤šå°±è¿™äº›äº†ï¼Œå†™çš„å¥½è¾›è‹¦@â€¦â€¦@ï¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2016/02/05/HTTPè§£è¯»ï¼ˆäºŒï¼‰/" data-id="cin7ls2cj0006a7wgg3jzjzj1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HTTPè§£è¯»ï¼ˆä¸€ï¼‰" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/25/HTTPè§£è¯»ï¼ˆä¸€ï¼‰/" class="article-date">
  <time datetime="2016-01-25T15:00:38.000Z" itemprop="datePublished">2016-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/25/HTTPè§£è¯»ï¼ˆä¸€ï¼‰/">HTTPè§£è¯»ï¼ˆä¸€ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘ä¸€ç›´åœ¨å­¦ä¹ HTTPç›¸å…³çŸ¥è¯†ï¼Œå­¦åˆ°çš„çŸ¥è¯†æ€»æ˜¯è¦æ€»ç»“ä¸€ä¸‹å˜›ï¼Œåˆ†å‡ ç¯‡æ–‡ç« æ€»ç»“ç²—æ¥~<br>è¿™ç¯‡ä¸»è¦å†…å®¹å…³äºWebåŸºç¡€ç›¸å…³çš„ï¼ŒçŸ¥è¯†ç‚¹éƒ½æ¯”è¾ƒæµ…æ˜¾æ˜“æ‡‚ï¼Œæ©ï¼Œé—²è¯å°±è¯´åˆ°è¿™é‡Œã€‚<br>HTTPæ˜¯å› ç‰¹ç½‘çš„ä¼ è¾“åª’ä»‹ï¼Œæ˜¯åº”ç”¨å±‚åè®®ï¼Œå®ƒæŠŠè”ç½‘ç»†èŠ‚éƒ½äº¤ç»™äº†é€šç”¨å¯é çš„å› ç‰¹ç½‘ä¼ è¾“åè®®ï¼šTCP/IPã€‚å¤§æ¦‚çš„å…³ç³»å¦‚å›¾:<img src="/img/http2.png" alt="">å½“å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ²Ÿé€šçš„æ—¶å€™å°±éœ€è¦HTTPä½œä¸ºä¿¡ä½¿æ¥ä¼ é€’æ¶ˆæ¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä¼šç»™æœåŠ¡å™¨å‘é€ä¸€æ¡HTTPè¯·æ±‚ï¼Œè¯·æ±‚éœ€è¦çš„æ–‡æ¡£ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åç»è¿‡å¤„ç†å°±ä¼šç»™å®¢æˆ·ç«¯åšå‡ºä¸€ä¸ªå“åº”ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å¤„ç†ç»“æœã€‚å½“ç„¶è¿™é‡Œæˆ‘ä»¬è¯´çš„å®¢æˆ·ç«¯å…¶å®å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„æµè§ˆå™¨ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œå½“ä½ åœ¨æµè§ˆå™¨é‡Œè¾“å…¥<a href="http://imwineki.cn/index.html" target="_blank" rel="external">http://imwineki.cn/index.html</a>,ç„¶åæŒ‰ä¸‹å›è½¦é”®åï¼Œç®€å•æ¥è¯´ï¼Œå°±ä¼šå‘ç”Ÿä»¥ä¸‹è¿™ä¸€äº›åˆ—çš„äº‹æƒ…ï¼Œå¦‚å›¾ï¼Œ<br><img src="/img/http1.png" alt="">æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨www.imwineki.cnå‘é€ä¸€æ¡HTTPè¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå°±ä¼šå»å¯»æ‰¾index.htmlçš„æ–‡æ¡£ï¼Œæ‰¾åˆ°äº†çš„è¯å°±ä¼šè¿”å›ç»™æµè§ˆå™¨æ–‡æ¡£ä¿¡æ¯ã€‚ä»¥åŠä¸€ä¸ª200çš„çŠ¶æ€ç ï¼Œå¦‚æœå¤±è´¥çš„è¯å°±ä¼šæ ¹æ®å…·ä½“çš„é”™è¯¯æƒ…å†µè¿”å›å…·ä½“çš„é”™è¯¯çŠ¶æ€ã€‚<br>ç¨å¾®å¤æ‚ä¸€ç‚¹æ¥è¯´ï¼Œå½“ä½ æŒ‰ä¸‹å›è½¦åï¼Œhttpä¼šè§£æURLçš„è¯­æ³•ï¼Œé€šå¸¸åŒ…å«ï¼šä»¥ä¸‹å‡ ç§ï¼š<br><img src="/img/http3.png" alt="">ï¼Œè·å–åˆ°<http:imwineki.cn index.html="">ä½¿ç”¨çš„æ˜¯httpåè®®ï¼ŒåŒè¿‡DNSæŸ¥è¯¢ä¸»æœºï¼Œè·å–åˆ°è¯¥åŸŸåä¸‹å¯¹åº”çš„æœåŠ¡å™¨çš„IPåœ°å€ï¼Œä»¥åŠç«¯å£å·ï¼ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯80ç«¯å£ï¼‰ï¼Œè·å–åˆ°æœåŠ¡å™¨çš„IPåœ°å€åï¼Œæ­¤æ—¶å¦‚æœæˆ‘åœŸè±ªçš„ä¹°äº†CDNæœåŠ¡çš„è¯ï¼Œæ¥ä¸‹æ¥ä»£ç†å°±ä¼šå°†è¯·æ±‚å‘é€ç»™ç¼“å­˜ï¼ˆCDNï¼‰ï¼Œç¼“å­˜æ ¹æ®æ–‡ä»¶å‰¯æœ¬çš„æ–°é²œåº¦æ¥å†³å®šè¿”å›å®¢æˆ·ç«¯æ•°æ®è¿˜æ˜¯å‘åŸå§‹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚,å¦‚æœä»£ç†éœ€è¦å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œåˆ™CDNå……å½“å®¢æˆ·ç«¯çš„è§’è‰²ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ˆå…·ä½“è¯·æ±‚å¤´éƒ¨ç­‰è¿™é‡Œå…ˆä¸ä»‹ç»ï¼‰ï¼Œå½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨åï¼Œåˆ™é¦–å…ˆåˆ°è¾¾åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¦‚æœåå‘ä»£ç†ä¸­åŒ…å«æ–‡ä»¶å‰¯æœ¬åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™åå‘ä»£ç†å†æ¬¡å‘æœåŠ¡å™¨æˆ–æœåŠ¡å™¨é›†ç¾¤è½¬å‘è¯·æ±‚ï¼Œå¦‚å›¾<img src="/img/http4.png" alt="">ã€‚å½“ç„¶æˆ‘è¯´çš„è¿™äº›æµç¨‹éƒ½æ˜¯å°å‹ç½‘ç«™ï¼Œè‡³äºå¤§å‹ç½‘ç«™æ¶æ„ï¼Œä¸­é—´è¿˜è¦åŒ…å«LVSè´Ÿè½½å‡è¡¡ï¼Œè™šæ‹ŸIPç­‰åŠ é€Ÿå·¥å…·ã€‚è¿™é‡Œéœ€è¦è¯´æ˜çš„ä¸€ç‚¹ï¼šåå‘ä»£ç†å’ŒCDNéƒ½å±äºç¼“å­˜ï¼Œéƒ½æ˜¯ä¸ºäº†å‡å°‘æœåŠ¡å™¨å‹åŠ›ï¼Œé™ä½ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼ŒåŠ é€Ÿç½‘ç«™ç›¸åº”çš„ï¼Œæ‰€ä¸åŒçš„æ˜¯ï¼šCDNéƒ¨ç½²åœ¨ç½‘ç»œæä¾›å•†çš„æœºæˆ¿ï¼Œåœ¨ç”¨æˆ·å‘å‡ºè¯·æ±‚åï¼Œå¯ä»¥ä¼˜å…ˆä»è·ç¦»æœ€è¿‘çš„ç½‘ç»œæä¾›å•†æœºæˆ¿è·å–æ•°æ®ï¼Œä½†åå‘ä»£ç†åˆ™æ˜¯éƒ¨ç½²åœ¨ä¸­å¿ƒæœºæˆ¿ï¼Œå½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œä¼šä¼˜å…ˆèµ°åå‘ä»£ç†ã€‚</http:imwineki.cn></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2016/01/25/HTTPè§£è¯»ï¼ˆä¸€ï¼‰/" data-id="cin7ls2cl0007a7wg7tur3sq9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP-webä¼ è¾“/">HTTP webä¼ è¾“</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Thinkjså®ç°å¼‚æ­¥åŠ è½½æ¨¡æ¿æ–¹æ³•" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/14/Thinkjså®ç°å¼‚æ­¥åŠ è½½æ¨¡æ¿æ–¹æ³•/" class="article-date">
  <time datetime="2015-12-14T09:23:10.000Z" itemprop="datePublished">2015-12-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/14/Thinkjså®ç°å¼‚æ­¥åŠ è½½æ¨¡æ¿æ–¹æ³•/">Thinkjså®ç°å¼‚æ­¥åŠ è½½</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä»Šå¤©æ¥æ€»ç»“ä¸€ä¸‹å…³äºä½¿ç”¨Thinkjsæ¥å®ç°é¡µé¢å¼‚æ­¥åŠ è½½çš„åŸç†å’Œåšæ³•ã€‚<br>æˆ‘ä»å‰ç«¯è®²èµ·ï¼Œé¦–å…ˆæµç¨‹ä¸­åŒ…å«ä¸€ä¸‹å‡ éƒ¨åˆ†ï¼š</p>
<table>
<thead>
<tr>
<th>View</th>
<th style="text-align:center">Controller</th>
<th style="text-align:right">Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç­›é€‰æ¡†ï¼ˆfilterï¼‰ç”¨äºç­›é€‰å†…å®¹ï¼Œä½ç½®åœ¨æ¯æ¨¡ç‰ˆ</td>
<td style="text-align:center">æ¯æ¨¡ç‰ˆå¯¹åº”çš„Action</td>
<td style="text-align:right">è°ƒç”¨æ•°æ®åº“</td>
</tr>
<tr>
<td>å¼‚æ­¥åŠ è½½å†…å®¹ï¼ˆcontentï¼‰ï¼Œä½ç½®åœ¨å­æ¨¡æ¿</td>
<td style="text-align:center">ajaxåˆ¤æ–­åçš„å¤„ç†</td>
<td style="text-align:right">è°ƒç”¨æ•°æ®åº“</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢æ ¹æ®ä»£ç å…·ä½“è§£é‡Šä¸€ä¸‹ï¼š<br>æ¯æ¨¡ç‰ˆçš„viewå±‚demoï¼š</p>
<pre><code><span class="xml">/*è¿™é‡Œæ˜¯ä¸€ä¸ªfilter*/
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"filter"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">dl</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">dt</span>&gt;</span>å¤§å°<span class="tag">&lt;/<span class="title">dt</span>&gt;</span>
        <span class="tag">&lt;<span class="title">dd</span>&gt;</span>
            <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>å…¨éƒ¨<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
            <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>å¤§<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
            <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>ä¸­<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
            <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>å°<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">dd</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dl</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
/*è¿™é‡Œæ˜¯ä¸€ä¸ªcontent*/
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span>
    </span>&lt;%<span class="ruby"><span class="keyword">include</span> ajax/tplselectajax.html</span>%&gt;<span class="xml">     /*è¿™é‡Œincludeè¿›æ¥ä¸€ä¸ªå­æ¨¡æ¿ï¼Œå°†æ¥å¼‚æ­¥åˆ·æ–°æ—¶å°±åªåˆ·æ–°å­æ¨¡æ¿æ•°æ®*/
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span>
</code></pre><p>å­æ¨¡æ¿çš„viewå±‚demo:<br>    å¯ä»¥çœ‹åˆ°ä»åç«¯ä¼ æ¥ä¸€ä¸ªtpllistçš„æ•°æ®å­—æ®µï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬æŠŠå®ƒå¾ªç¯è¾“å‡ºå‡ºæ¥ï¼ŒåŒæ—¶ä¸€ä¼šå¼‚æ­¥åˆ·æ–°çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿåªæ˜¯åˆ·æ–°è¿™ä¸ªå­æ¨¡æ¿çš„æ•°æ®ï¼Œè€Œä¸ä¼šæ”¹å˜ä¸Šé¢çš„æ¯æ¨¡æ¿çš„æ•°æ®ã€‚</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"cont-wrap"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">ul</span>&gt;</span>
        </span><span class="vbscript">&lt;%tpllist.forEach(<span class="keyword">function</span>(item){ %&gt;</span><span class="xml">
            <span class="tag">&lt;<span class="title">li</span>&gt;</span>
                <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><span class="vbscript">&lt;%=item.desc%&gt;</span><span class="xml"><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
                <span class="tag">&lt;<span class="title">p</span>&gt;</span></span><span class="vbscript">&lt;%=item.name%&gt;</span><span class="xml"><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        </span><span class="vbscript">&lt;%})%&gt;</span><span class="xml">
    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span>
</code></pre><p>å½“ç„¶è¿™é‡Œéœ€è¦jsæ¥å¸®å¿™ä½¿ç”¨ajaxæ¥è¿›è¡Œä¸€æ­¥è°ƒç”¨:</p>
<pre><code>$(<span class="string">'a'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>{
    e.preventDefault();
    $.ajax({
        url:<span class="string">''</span>,<span class="comment">/*å¡«å†™è¯·æ±‚è·¯å¾„*/</span>
        dataTpe:<span class="string">'jsonp'</span>,
        data:<span class="string">''</span>,<span class="comment">/*ä¼ é€çš„æ•°æ®*/</span>
        success:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{

        },
        fail:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{

        }

    });
});
</code></pre><p>Controllerå±‚çš„å¤„ç†:</p>
<pre><code>tplselectAction: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{
    <span class="keyword">var</span> <span class="keyword">self</span> = this;
    <span class="comment">/*è·å–getè¯·æ±‚çš„å‚æ•°ï¼Œåœ¨è¿™ä¸ªdemoä¸­å…¶å®å°±æ˜¯ç­›é€‰æ¡ä»¶*/</span>
    <span class="keyword">var</span> data = this.get();  
    <span class="keyword">var</span> pg = data.pg;
    <span class="comment">/*åˆ¤æ–­æ—¶å€™æ˜¯ajaxè¯·æ±‚ï¼Œå¦‚æœæ˜¯åˆ™ç»“æœè¿”å›true*/</span>
    <span class="keyword">var</span> isAjax = <span class="keyword">self</span>.isAjax();   
    <span class="comment">/*å­æ¨¡æ¿æ¸²æŸ“è·¯å¾„ï¼Œæ³¨æ„æ­¤å¤„æ ¹ç›®å½•æ˜¯Home*/</span>
    <span class="keyword">var</span> tpl = <span class="string">'Home/ajax/build_tplselectajax.html'</span>;         
    <span class="keyword">if</span>(!isAjax){
        <span class="comment">/*å¦‚æœä¸æ˜¯ajaxè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨é¦–æ¬¡æ¸²æŸ“æ•°æ®æ—¶ï¼Œé»˜è®¤é€‰æ‹©å±•ç¤ºå…¨éƒ¨æ•°æ®*/</span>
        data = { cateId: <span class="string">'å…¨éƒ¨'</span>}
    }
    <span class="comment">/*è°ƒç”¨æ•°æ®åº“è·å–æ•°æ®ï¼Œè°ƒç”¨ajaxdataæ–¹æ³•*/</span>
    D(<span class="string">'Template'</span>).ajaxdata(data,pg).then(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
        <span class="keyword">var</span> <span class="keyword">list</span> = shiftObject(data,<span class="string">'data'</span>);  <span class="comment">/*å°†æ•°æ®åº“dataå­—æ®µæ•´ä½“å­˜å…¥list*/</span>
        <span class="keyword">self</span>.assign(<span class="string">'tpllist'</span>,<span class="keyword">list</span>);  
        <span class="keyword">self</span>.assign(<span class="string">'isAjax'</span>,isAjax);
        <span class="keyword">if</span>(isAjax){
            <span class="comment">/*å¦‚æœæ˜¯ajaxæ¨¡æ¿ï¼Œåˆ™åˆ©ç”¨fetchè¿™ä¸ªæ–¹æ³•å¯¹æ¨¡æ¿è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œå¹¶è¿”å›ç›¸åº”jsonæ ¼å¼çš„çŠ¶æ€å€¼*/</span>
            <span class="keyword">if</span>(<span class="keyword">list</span>.length !== <span class="number">0</span>){
                <span class="keyword">self</span>.fetch(tpl).then(<span class="function"><span class="keyword">function</span><span class="params">(content)</span></span>{
                   <span class="keyword">self</span>.jsonp({status:<span class="string">"success"</span>,cont:content});
                });
            }<span class="keyword">else</span>{
                <span class="keyword">self</span>.jsonp({status:<span class="string">"fail"</span>,cont:<span class="string">'æš‚æ—¶æœ¨æœ‰ç›¸åº”çš„æ¨¡æ¿ï¼Œæœæœåˆ«çš„è¯•è¯•å§ï¼'</span>});
            }
        }<span class="keyword">else</span>{
            <span class="comment">/*é¦–æ¬¡åŠ è½½é¡µé¢åˆ™ç›´æ¥å±•ç¤º*/</span>
            <span class="keyword">self</span>.display();
        }
    });
}
</code></pre><p>Modelå±‚çš„å¤„ç†demoï¼š</p>
<pre><code>ajaxdata: function(<span class="built_in">data</span>){
    <span class="built_in">var</span> <span class="built_in">self</span> = this;
    <span class="keyword">if</span>(<span class="built_in">data</span><span class="built_in">.</span>cateId = <span class="string">'å…¨éƒ¨'</span>){
        <span class="keyword">return</span> <span class="built_in">self</span><span class="built_in">.</span><span class="keyword">order</span>({<span class="string">'id'</span>:<span class="string">'desc'</span>})<span class="built_in">.</span><span class="keyword">select</span>()<span class="built_in">.</span>then(function(<span class="built_in">data</span>){
            <span class="keyword">return</span> <span class="built_in">data</span>;
        });
    }<span class="keyword">else</span>{
        <span class="keyword">return</span> <span class="built_in">self</span><span class="built_in">.</span><span class="keyword">where</span>({<span class="string">'title'</span>:<span class="built_in">data</span><span class="built_in">.</span>cateId})<span class="built_in">.</span><span class="keyword">order</span>({<span class="string">'id'</span>:<span class="string">'desc'</span>})<span class="built_in">.</span><span class="keyword">select</span>()<span class="built_in">.</span>then(function(<span class="built_in">data</span>){
            <span class="keyword">return</span> <span class="built_in">data</span>;    
        });
    }
}
</code></pre><p>Modelå±‚çš„å¤„ç†ï¼š<br>è¿™é‡Œæ˜¯é¡¹ç›®æºä»£ç çš„æŸ¥è¯¢:</p>
<pre><code>ajaxdata: <span class="function"><span class="keyword">function</span><span class="params">(data,pg)</span></span>{
        var self = this;
        var <span class="keyword">where</span> = <span class="keyword">where</span> || {};
        /*æ­¤å¤„åŒ…å«å…¶ä»–å‚æ•°çš„å¤åˆæŸ¥è¯¢ï¼Œå±•ç¤ºå‡ºæ¥ï¼Œåœ¨demoä¸­æš‚æ—¶ä¸è€ƒè™‘*/
        /*var join = {
            templatecate: {
                join: <span class="string">'left'</span>,
                as: <span class="string">'c'</span>,
                on: [<span class="string">'cateId'</span>,<span class="string">'id'</span>]
            }
        };
        var pg = pg || (isNumber(<span class="keyword">where</span>) ? <span class="keyword">where</span> : null);
        var lastCond = {};
        <span class="keyword">if</span>(<span class="comment">!isEmpty(where)){</span>
            for(var i <span class="type">in</span> <span class="keyword">where</span>){
                var find = false;
                for(var s <span class="type">in</span> fields){
                    <span class="keyword">if</span>(fields[s].indexOf(i) &gt; -<span class="number">1</span>){
                        lastCond[s + <span class="string">'.'</span> + i] = <span class="keyword">where</span>[i];
                        find = true;
                        break;
                    }
                }
                <span class="keyword">if</span>(find)<span class="keyword">continue</span>;
                lastCond[<span class="string">'t.'</span> + i] = <span class="keyword">where</span>[i];
            }
        }*/
        <span class="keyword">if</span>(<span class="type">data</span>.cateId == <span class="string">'å…¨éƒ¨'</span>){
            var per = C(<span class="string">'db_nums_per_page'</span>);
            /*åœ¨ç­›é€‰æ¡†ä¸ºâ€˜å…¨éƒ¨â€™æ—¶ï¼Œå°†æ•°æ®ä¸­å…¨éƒ¨æ•°æ®æŒ‰æ¡ä»¶æŸ¥è¯¢å‡ºæ¥ï¼Œå¹¶ä¸”è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼ˆåˆ†é¡µæŸ¥è¯¢æ­¤å¤„æˆ‘ä»¬æš‚æ—¶ä¸è®¨è®ºï¼‰*/
            <span class="keyword">return</span> self.<span class="keyword">where</span>({<span class="string">'endType'</span>:<span class="type">data</span>.<span class="keyword">endType</span>,<span class="string">'isForbidden'</span>:<span class="number">0</span>}).order({<span class="string">'id'</span>: <span class="string">'desc'</span>}).page(pg).<span class="keyword">select</span>().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
                    <span class="keyword">return</span> <span class="type">data</span>;
            }).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(datalist)</span></span>{
                /*å°†è¿”å›ç»“æœè¿›è¡Œå¤„ç†ï¼Œå¹¶è¿”å›ç›¸åº”çš„å‚æ•°*/
                <span class="keyword">return</span> self.field(<span class="string">'count(id) as count'</span>).<span class="keyword">where</span>({<span class="string">'endType'</span>:<span class="type">data</span>.<span class="keyword">endType</span>}).find().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>{
                    <span class="keyword">return</span> {
                        <span class="type">data</span>: datalist,
                        <span class="built_in">count</span>: res.<span class="built_in">count</span>,
                        page: pg || <span class="number">1</span>,
                        num: per,
                        total: Math.ceil(res.<span class="built_in">count</span> / per)
                    };
                });
            }); 
        }<span class="keyword">else</span>{
            /ajaxè¯·æ±‚æ˜¯æŸ¥è¯¢ç»“æœï¼ŒæŒ‰ç…§cateIdçš„å€¼è¿›è¡ŒæŸ¥è¯¢/
            var per = C(<span class="string">'db_nums_per_page'</span>);
            <span class="keyword">return</span> self.alias(<span class="string">'t'</span>).field(<span class="string">'t.*'</span>).join(join).<span class="keyword">where</span>({<span class="string">'c.title'</span>:<span class="type">data</span>.cateId,<span class="string">'t.endType'</span>:<span class="type">data</span>.<span class="keyword">endType</span>,<span class="string">'isForbidden'</span>:<span class="number">0</span>}).order({<span class="string">'t.id'</span>: <span class="string">'desc'</span>}).page(pg).<span class="keyword">select</span>().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
                    <span class="keyword">return</span> <span class="type">data</span>;
            }).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(datalist)</span></span>{
                <span class="keyword">return</span> self.alias(<span class="string">'t'</span>).field(<span class="string">'count(t.id) as count'</span>).join(join).<span class="keyword">where</span>({<span class="string">'c.title'</span>:<span class="type">data</span>.cateId,<span class="string">'t.endType'</span>:<span class="type">data</span>.<span class="keyword">endType</span>}).find().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>{
                    <span class="keyword">return</span> {
                        <span class="type">data</span>: datalist,
                        <span class="built_in">count</span>: res.<span class="built_in">count</span>,
                        page: pg || <span class="number">1</span>,
                        num: per,
                        total: Math.ceil(res.<span class="built_in">count</span> / per)
                    };
                });
            }); 
        }

    }
</code></pre><p>å…³äºThinkjsé‡Œé¢çš„å…·ä½“è¯­æ³•æˆ‘å°±ä¸ä¸€ä¸€è§£é‡Šäº†ï¼Œè¿™é‡Œä¸»è¦æ¥è®²ä¸€ä¸‹å¤§æ¦‚çš„æ€è·¯ï¼Œé¦–å…ˆå‰ç«¯éœ€è¦åœ¨æ¨¡æ¿ä¸­å°†éœ€è¦å¼‚æ­¥åŠ è½½çš„æ¨¡æ¿è¿›è¡Œinclude,æ–¹ä¾¿åç»­çš„å¼‚æ­¥åˆ·æ´—é¡µé¢ï¼ŒåŒæ—¶ä½ éœ€è¦ç”¨jsæ¥è¿›è¡Œä¸€ä¸ªajaxçš„é€šä¿¡ï¼Œæ¥ç€å°±æ˜¯Controllerå±‚å¯¹æ¨¡æ¿çš„æ¸²æŸ“ï¼Œåœ¨æ‹¿åˆ°å‰ç«¯ä¼ æ¥çš„è¯·æ±‚æ•°æ®åï¼Œè°ƒç”¨modelå±‚çš„æ–¹æ³•ä»æ•°æ®åº“ä¸­å–å‡ºæ•°æ®ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨fetehè¿™ä¸ªæ–¹æ³•é‡æ–°æ¸²æŸ“é¡µé¢ã€‚ï¼ˆå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨display(æ¸²æŸ“æ¨¡æ¿è·¯å¾„)è¿™ä¸ªæ–¹æ³•ï¼Œåªæ˜¯æ¸²æŸ“çš„æ–¹å¼ä¸ç”¨è€Œå·²ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ï¼‰æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æœä¸€ä¸‹APIã€‚<br>sqlè¯­å¥å†™çš„ä¸å¥½ï¼Œè¿˜æœ›å¤§å®¶è§è°…~~å“ˆå“ˆå“ˆï¼Œå…ˆå°±è¿™ä¹ˆå¤š~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2015/12/14/Thinkjså®ç°å¼‚æ­¥åŠ è½½æ¨¡æ¿æ–¹æ³•/" data-id="cin7ls2cg0005a7wg1o8l0vge" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/25/cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ/" class="article-date">
  <time datetime="2015-11-25T15:25:41.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ/">cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘å†™é¡¹ç›®å‘ç°äº†cssçš„ä¸€äº›å°é—®é¢˜æ€»ç»“å‡ºæ¥ï¼Œä¸»è¦æ˜¯å…³äºcssé€‰æ‹©å™¨æƒé‡ç›¸å…³çš„ã€‚<br>åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™é¡µé¢æ ·å¼çš„æ—¶å€™é€šå¸¸éƒ½è¦è€ƒè™‘é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ï¼Œä½¿å¾—é¡µé¢çš„æ ·å¼ä¸ä¼šè¢«è¦†ç›–æˆ–è¦†ç›–å…¶ä»–æ ·å¼ã€‚<br>æ€»ä½“æ¥è¯´ä¼˜å…ˆçº§æ˜¯è¿™æ ·çš„ï¼ˆæ­¤å¤„ä»é«˜åˆ°åº•æ’åºï¼‰ï¼š</p>
<blockquote>
<p>!important  -&gt;   è¡Œå†…æ ·å¼style(æ­¤å¤„åŒ…å«å†™åœ¨htmlç»“æ„ä¸­çš„å’Œç”¨jsåŠ¨æ€åŠ è½½ä¸Šå»çš„style)  -&gt;  idé€‰æ‹©å™¨  -&gt;  ä¼ªç±»  -&gt;  classé€‰æ‹©å™¨  -&gt;  å…ƒç´ é€‰æ‹©å™¨  -&gt;  é€šç”¨é€‰æ‹©å™¨( * )</p>
</blockquote>
<p>è¿™é‡Œæˆ‘æ¥å¯¹ä¸€äº›ç»†èŠ‚è¯´æ˜ä¸€ä¸‹ï¼š<br>1.é¡µé¢ä¸­èƒ½ä¸è¦ä½¿ç”¨ï¼importantå°½é‡é¿å…ä½¿ç”¨ï¼Œå› ä¸ºä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œï¼importantä¸ä¼˜å…ˆçº§æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œå½“ä½¿ç”¨!importantå®šä¹‰æ¨¡å—çš„æ—¶å€™é¡µé¢ä¸­å†å¯¹å…¶è¿›è¡Œä»»ä½•æ“ä½œéƒ½æ— æµäºäº‹äº†ï¼Œæ”¹å˜äº†æ ·å¼è¡¨æœ¬æ¥çš„çº§è”è§„åˆ™ï¼Œéš¾ä»¥è°ƒè¯•ã€‚<br>2.è¡Œå†…æ ·å¼è¿™é‡Œçš„ä¸¤æ–¹é¢è·ç¦»è¯´æ˜ï¼š</p>
<pre><code><span class="number">1</span>.&lt;<span class="tag">p</span> style=<span class="string">"color:red"</span> id=<span class="string">"test"</span>&gt;&lt;/p&gt;

<span class="number">2</span>. document.<span class="function"><span class="title">getElementById</span><span class="params">(<span class="string">'topnav'</span>)</span></span><span class="class">.style</span><span class="class">.color</span> = <span class="string">'red'</span>
</code></pre><p>3.å…³äºä¼ªç±»çš„ä¼˜å…ˆçº§éµå¾ªï¼šLVHA,ä»å³å‘å·¦ä¼˜å…ˆçº§é€çº§å¢åŠ .ç„¶è€Œnotä½œä¸ºä¼ªç±»ï¼Œå´å¹¶ä¸åˆ—å…¥ä¼ªç±»ä¼˜å…ˆçº§çš„è¯„æ¯”ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å…ƒç´ æœ‰é‡æ–°å®šä¹‰çš„æ ·å¼çš„æ—¶å€™notä¼šè¢«è‡ªåŠ¨è¦†ç›–ã€‚ä¸¾ä¾‹è¯´æ˜ï¼š</p>
<pre><code>&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"test-not"</span>&gt;æµ‹è¯•ä¼ªç±»<span class="keyword">not</span>&lt;/<span class="keyword">div</span>&gt;
&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"not"</span>&gt;<span class="number">123</span>&lt;/<span class="keyword">div</span>&gt;
</code></pre><p>å½“å®šä¹‰æ ·å¼ä¸ºï¼š</p>
<pre><code><span class="rule"><span class="attribute">.test-not</span>:<span class="value"><span class="function">not</span>(.not){
    color:red</span></span>;
}
</code></pre><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š<br><img src="/img/1.png" alt=""><br>123ä¸ºé»‘è‰²ï¼Œè¯´æ˜æ ·å¼ä¸­notç”Ÿæ•ˆäº†ã€‚<br>å½“å®šä¹‰æ ·å¼ä¸ºï¼š</p>
<pre><code><span class="class">.not</span><span class="rules">{
    <span class="rule"><span class="attribute">color</span>:<span class="value">red</span></span>;
}</span>
<span class="rule"><span class="attribute">.test-not</span>:<span class="value"><span class="function">not</span>(.not){
    color:red</span></span>;
}
</code></pre><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š<br><img src="/img/2.png" alt=""><br>123æ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œè¯´æ˜notæ ·å¼è¢«å…ƒç´ æœ¬èº«å®šä¹‰çš„æ ·å¼è¦†ç›–äº†ã€‚<br>4.å…³äºaæ ‡ç­¾çš„è¯´æ˜ï¼š</p>
<pre><code>a:link{
    <span class="built_in">color</span>:<span class="built_in">green</span>;
}
<span class="comment">/*a:visited{
    color:yellow;
}*/</span>
.test{
    <span class="built_in">color</span>:<span class="built_in">red</span>;
}
&lt;a href=<span class="string">"/"</span> class=<span class="string">"test-relative"</span>&gt;ç›¸å¯¹ç›®å½•&lt;/a&gt;
</code></pre><p>å½“æˆ‘ä»¬æŠŠaæ ‡ç­¾åŠ ä¸Šlinkä¼ªç±»çš„æ—¶å€™ï¼Œlinkçš„ä¼˜å…ˆçº§å°±é«˜äºclass=â€testâ€,æ‰€ä»¥åœ¨é¦–æ¬¡è½½å…¥é¡µé¢çš„æ—¶å€™æ–‡å­—ä¼šæ˜¾ç¤ºç»¿è‰²ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»é“¾æ¥åï¼Œå‘ç°æ–‡å­—åˆå˜å›äº†çº¢è‰²ï¼Œè¿™æ˜¯å› ä¸ºé“¾æ¥ç‚¹å‡»åçš„çŠ¶æ€ä¸ºvisitedï¼Œè€Œåœ¨æ ·å¼ä¸­æˆ‘ä»¬å°†visitedçš„æ ·å¼å®šä¹‰æ³¨é‡Šæ‰äº†ï¼Œæ‰€ä»¥é“¾æ¥æ ·å¼å°±ä¼šç›´æ¥æ˜¾ç¤ºclass=â€testâ€çš„æ ·å¼äº†ã€‚<br>å½“æˆ‘ä»¬å°†visitedçš„æ ·å¼å®šä¹‰å»æ‰åï¼Œä¼šå‘ç°é¢œè‰²æ˜¾ç¤ºä¸ºé»„è‰²ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2015/11/25/cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ/" data-id="cin7ls2cc0003a7wg3qdf7zqf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Thinkjsé“¾å¼ç»“æ„æ€»ç»“" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/25/Thinkjsé“¾å¼ç»“æ„æ€»ç»“/" class="article-date">
  <time datetime="2015-11-25T15:12:59.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/Thinkjsé“¾å¼ç»“æ„æ€»ç»“/">Thinkjsé“¾å¼ç»“æ„æ€»ç»“</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œç”±äºåˆšå¼€å§‹å­¦ä¹ markdownçš„æ–¹å¼å†™åšæ–‡ï¼Œé€Ÿåº¦å¥½æ…¢ã€‚<br><br>æœ€è¿‘åœ¨ç”¨<em>Thinkjs</em>å†™é¡¹ç›®ï¼Œåˆå‘ä»å‰ç«¯åˆ°å…¨æ®µçš„æ¢¦æƒ³è¿ˆè¿›äº†ä¸€æ­¥ï¼Œå“ˆå“ˆï¼Œå†™è¯å°‘è¯´ï¼Œshareä¸€äº›å¹²è´§ç²—æ¥ã€‚<br><br><em>Thinkjs</em>æ˜¯åŸºäºnodejsçš„webæ¡†æ¶ï¼Œå…·ä½“çš„æ–‡æ¡£å¯ä»¥å‚çœ‹<a href="https://thinkjs.org/" target="_blank" rel="external">https://thinkjs.org/</a>å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯1.0ç‰ˆæœ¬ï¼Œæ‰€ä»¥æš‚æ—¶åªè®¨è®º1.0çš„ä¸€äº›æƒ…å†µã€‚<br>ä»Šå¤©å†™é¡¹ç›®ä¸­é‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<br>æˆ‘ä»sessionä¸­è·å–åˆ°ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç„¶åè·å–å­˜åœ¨sessionä¸­çš„userNameï¼Œä½¿ç”¨ï¼š</p>
<pre><code><span class="keyword">this</span>.session(<span class="string">"userInfo"</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
...
});
</code></pre><p>çš„æ–¹å¼ï¼Œå¦ä¸€æ–¹é¢æˆ‘é€šè¿‡æ•°æ®åº“æŸ¥è¯¢è·å–åˆ°ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„userName,ç„¶åæ¯”è¾ƒè¿™ä¸¤ä¸ªuserNameæ—¶å€™å¦ç›¸åŒï¼Œä½¿ç”¨</p>
<pre><code><span class="tag">D</span>(<span class="string">'User'</span>)<span class="class">.get</span>(id)<span class="class">.then</span>(<span class="function">function</span>(data){
...
}); 
</code></pre><p>å†å°†ä¸€ä¸ªæ ‡ç­¾å€¼assignåˆ°viewå±‚å¯¹åº”çš„é¡µé¢ã€‚<br>ç„¶è€Œå°±åœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°æˆ‘åœ¨æ¯”è¾ƒä¹‹åï¼Œæ— æ³•å°†æ ‡ç­¾å€¼ä¼ å…¥é¡µé¢ã€‚<br>å…·ä½“ä»£ç å¦‚å›¾ï¼š<br><img src="http://p6.qhimg.com/d/inn/f451a883/code.png" alt="1"><br>è¿™æ˜¯ä¸€ä»½ä¼ªä»£ç ï¼Œä¸Šé¢çš„å›¾ç‰‡çš„å¤§æ¦‚æ„æ€å°±æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code><span class="keyword">return</span> D(<span class="string">'User'</span>).get(id).then(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
    <span class="keyword">return</span> <span class="keyword">self</span>.session(<span class="string">'user'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(user)</span></span>{
        <span class="comment">//éªŒè¯sessionä¿¡æ¯,è¿”å›editable</span>
        <span class="keyword">self</span>.assign(<span class="string">'editable'</span>,editable);
        <span class="keyword">self</span>.assign(<span class="string">'user'</span>,data);
        <span class="keyword">self</span>.display();
    });
});
</code></pre><p>æœ€åˆæˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p>
<pre><code><span class="keyword">return</span> D(<span class="string">'User'</span>).get(id).then(<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{
    <span class="keyword">var</span> session = <span class="keyword">self</span>.session(<span class="string">'user'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(user)</span></span>{
        <span class="comment">//éªŒè¯sessionä¿¡æ¯,è¿”å›editable</span>
        <span class="keyword">self</span>.assign(<span class="string">'editable'</span>,editable);
    });
    <span class="keyword">self</span>.assign(<span class="string">'user'</span>,data);
    <span class="keyword">self</span>.display();
});
</code></pre><p>ç„¶åæˆ‘å‘ç°è¿™ä¸ªæ ¹æœ¬æ²¡æœ‰æƒ³ä¸‹æ‰§è¡Œï¼Œé¡µé¢ç›´æ¥ç™½å±äº†ï¼ŒåŸå› å…¶å®æ˜¯è¿™æ ·çš„ï¼Œåœ¨<em>thinkjs</em>ä¸­ç»å¤§å¤šæ•°æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥è°ƒç”¨çš„ï¼Œå¹¶ä¸”åŒ…è£…æˆpromiseï¼Œè€Œpromiseæ˜¯é€šè¿‡<br><em>try{}catch{}</em>è¿›è¡Œå¼‚å¸¸æ•è·çš„ï¼Œå¾ˆæ˜¾ç„¶æˆ‘æ²¡æœ‰catchå¼‚å¸¸æ‰€ä»¥å¯¼è‡´ç›´æ¥ç™½å±ï¼ŒåŒæ—¶ç”±äºthinkjsä¸­è®¸å¤šçš„è°ƒç”¨éƒ½æ˜¯å¼‚æ­¥è°ƒç”¨ï¼ˆè¿™ä¸ªä¹‹å‰è¯´è¿‡ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨sessionè¿˜æ²¡æœ‰è¿”å›å€¼çš„æ—¶å€™ç¨‹åºå°±å‘ä¸‹æ‰§è¡Œäº†ï¼Œä½†æ˜¯æ­¤å¤„æˆ‘å¿…é¡»è¦å®ƒåŒæ­¥æ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‰ç…§ç¨‹åºå†™çš„å…ˆåé¡ºåºæ¥æ‰§è¡Œï¼Œæ‰€ä»¥å°±é‡‡ç”¨returnçš„æ–¹æ³•ï¼Œå°†æ²¡æœ‰ä¸ªå¼‚æ­¥æ–¹æ³•ä¸²è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªè°ƒç”¨é“¾å°±æå®šäº†ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.imwineki.cn/2015/11/25/Thinkjsé“¾å¼ç»“æ„æ€»ç»“/" data-id="cin7ls2cf0004a7wgyrq82r1g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP-webä¼ è¾“/">HTTP webä¼ è¾“</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTTP-webä¼ è¾“/" style="font-size: 10px;">HTTP webä¼ è¾“</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/19/åŸºäºcanvasç»Ÿè®¡å›¾å®ç°/">åŸºäºcanvasç»Ÿè®¡å›¾å®ç°</a>
          </li>
        
          <li>
            <a href="/2016/02/05/HTTPè§£è¯»ï¼ˆäºŒï¼‰/">HTTPè§£è¯»ï¼ˆäºŒï¼‰</a>
          </li>
        
          <li>
            <a href="/2016/01/25/HTTPè§£è¯»ï¼ˆä¸€ï¼‰/">HTTPè§£è¯»ï¼ˆä¸€ï¼‰</a>
          </li>
        
          <li>
            <a href="/2015/12/14/Thinkjså®ç°å¼‚æ­¥åŠ è½½æ¨¡æ¿æ–¹æ³•/">Thinkjså®ç°å¼‚æ­¥åŠ è½½</a>
          </li>
        
          <li>
            <a href="/2015/11/25/cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ/">cssé€‰æ‹©å™¨ä¼˜å…ˆçº§æƒé‡åˆ†æ</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Wineki<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>